#include "stdio.h"
#include "math.h"

int fact(int);
double fast_pi(void);
double sigma(int);
void super_pi(int);
void show_rule(void) {
    printf("Enter how many numbers after point you "
           "want to see or \'q\' to exit\n>>> ");
}

int main(void) {
    int user_input;
    show_rule();
    while(scanf("%d", &user_input) == 1) {
        super_pi(user_input);
        char ch;
        while((ch = getchar()) != '\n');
        show_rule();
    }
    return 0;
}

int fact(int num) {
    int f = (num == 0)? 1: num;
    while (num > 1) {
        num--, f *= num;
    }
    return f;
}

double fast_pi(void) {
    // Very fast but have limitations with c types
    // Calculates only 18 digits after point
    return 9801.0/(2.0*pow(2.0, 0.5)*sigma(15));
}

double sigma(int n) {
    double result = 0;
    for (int k = 0; k <= n; k++) {
        result += (double) fact(4*k)*(1103+26390*k) / 
                  (pow(fact(k), 4.0)*pow(396.0, 4*k));
    }
    return result;
}

void super_pi(int n) {
    n = (n >= 1000)? 1000: n;
    char pi [] = "3.14159265358979323846264338327950288419716939937510" 
    "58209749445923078164062862089986280348253421170679821480865132823"
    "06647093844609550582231725359408128481117450284102701938521105559"
    "64462294895493038196442881097566593344612847564823378678316527120"
    "19091456485669234603486104543266482133936072602491412737245870066"
    "06315588174881520920962829254091715364367892590360011330530548820"
    "46652138414695194151160943305727036575959195309218611738193261179"
    "31051185480744623799627495673518857527248912279381830119491298336"
    "73362440656643086021394946395224737190702179860943702770539217176"
    "29317675238467481846766940513200056812714526356082778577134275778"
    "96091736371787214684409012249534301465495853710507922796892589235"
    "42019956112129021960864034418159813629774771309960518707211349999"
    "99837297804995105973173281609631859502445945534690830264252230825"
    "33446850352619311881710100031378387528865875332083814206171776691"
    "47303598253490428755468731159562863882353787593751957781857780532"
    "1712268066130019278766111959092164201989";
    for (int i = 0; i < n + 2; i++) {
        putchar(pi[i]);
    }
    puts("");
}
